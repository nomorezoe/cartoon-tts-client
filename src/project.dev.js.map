{"version":3,"sources":["assets/Scripts/game/Game.js"],"names":["cc","Class","extends","Component","properties","editBox","EditBox","onLoad","isLocalHost","window","location","href","indexOf","console","log","this","urlAddress","socket","io","transports","on","handleConnect","bind","onTTSCompleted","id","info","file","remoteUrl","loader","load","url","type","err","res","audioEngine","play","sendHandler","sendText","string","emit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOAA,GAAAC;MACIC,SAAAF,GAAAG;MAEAC;QACIC,SAAAL,GAAAM;;MAIJC,QAAA,SAAAA;QAEI,IAAAC,cAAA;SACA,KAAAC,OAAAC,SAAAC,KAAAC,QAAA,iBAAA,KAAAH,OAAAC,SAAAC,KAAAC,QAAA,iBACIJ,cAAA;QAEJK,QAAAC,IAAA,eAAAN;QAEAO,KAAAC,aAAAR,cAAA,0BAAA;QACAO,KAAAE,SAAA,IAAAR,OAAAS,GAAAH,KAAAC;UAA8CG,cAAA,aAAA,WAAA;;QAE9CJ,KAAAE,OAAAG,GAAA,WAAAL,KAAAM,cAAAC,KAAAP;QACAA,KAAAE,OAAAG,GAAA,kBAAAL,KAAAQ,eAAAD,KAAAP;;MAIJM,eAAA,SAAAA;QACIR,QAAAC,IAAA,aAAAC,KAAAE,OAAAO;;MAGJD,gBAAA,SAAAA,eAAAE;QACI,KAAAA,MACI;QAEJZ,QAAAC,IAAA,kBAAAW,KAAAC,MAAAD,KAAAA;QAEA,IAAAE,YAAAZ,KAAAC,aAAA,uBAAAS,KAAAC;QACA1B,GAAA4B,OAAAC;UAAgBC,KAAAH;UAAgBI,MAAA;WAAjB,SAAAC,KAAAC;UAEXjC,GAAAkC,YAAAC,KAAAF;;;MAIRG,aAAA,SAAAA;QACI,IAAAC,WAAAtB,KAAAV,QAAAiC;QACAvB,KAAAE,OAAAsB,KAAA,OAAAF","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        editBox:cc.EditBox,\n        \n    },\n\n    onLoad () {\n\n        let isLocalHost = false;\n        if(window.location.href.indexOf(\"localhost\")!=-1 || window.location.href.indexOf(\"127.0.0.1\")!=-1){\n            isLocalHost = true;\n        }\n        console.log(\"isLocalHost\", isLocalHost);\n\n        this.urlAddress = isLocalHost ? \"http://127.0.0.1:3000\":\"http://13.115.222.147:3000\";\n        this.socket = new window.io(this.urlAddress, {transports: ['websocket', 'polling', 'flashsocket']});\n\n        this.socket.on(\"connect\", this.handleConnect.bind(this));\n        this.socket.on(\"onTTSCompleted\", this.onTTSCompleted.bind(this));\n\n    },\n\n    handleConnect(){\n        console.log('connected', this.socket.id); \n    },\n\n    onTTSCompleted(info){\n        if(!info){\n            return;\n        }\n        console.log(\"onTTSCompleted\", info.file, info.info);\n\n        let remoteUrl =  this.urlAddress + \"/output/?fileName=\" + info.file;\n        cc.loader.load({url: remoteUrl, type: 'wav'}, function (err, res) {\n            // Use texture to create sprite frame\n            cc.audioEngine.play(res);\n        });\n    }, \n\n    sendHandler(){\n        let sendText = this.editBox.string;\n        this.socket.emit(\"tts\", sendText);\n    }\n\n    \n\n    // update (dt) {},\n});\n"],"file":"project.dev.js"}