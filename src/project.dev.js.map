{"version":3,"sources":["assets/Scripts/game/Game.js"],"names":["cc","Class","extends","Component","properties","editBox","EditBox","onLoad","isLocalHost","window","location","href","indexOf","console","log","this","socket","io","transports","on","handleConnect","bind","onTTSCompleted","id","info","file","remoteUrl","loader","load","url","type","err","res","audioEngine","play","sendHandler","sendText","string","emit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAOAA,GAAAC;MACIC,SAAAF,GAAAG;MAEAC;QACIC,SAAAL,GAAAM;;MAIJC,QAAA,SAAAA;QAEI,IAAAC,cAAA;SACA,KAAAC,OAAAC,SAAAC,KAAAC,QAAA,iBAAA,KAAAH,OAAAC,SAAAC,KAAAC,QAAA,iBACIJ,cAAA;QAEJK,QAAAC,IAAA,eAAAN;QAEAO,KAAAC,SAAA,IAAAP,OAAAQ,GAAAT,cAAA,0BAAA;UAA8FU,cAAA,aAAA,WAAA;;QAE9FH,KAAAC,OAAAG,GAAA,WAAAJ,KAAAK,cAAAC,KAAAN;QACAA,KAAAC,OAAAG,GAAA,kBAAAJ,KAAAO,eAAAD,KAAAN;;MAIJK,eAAA,SAAAA;QACIP,QAAAC,IAAA,aAAAC,KAAAC,OAAAO;;MAGJD,gBAAA,SAAAA,eAAAE;QACI,KAAAA,MACI;QAEJX,QAAAC,IAAA,kBAAAU,KAAAC,MAAAD,KAAAA;QAEA,IAAAE,YAAA,4CAAAF,KAAAC;QACAzB,GAAA2B,OAAAC;UAAgBC,KAAAH;UAAgBI,MAAA;WAAjB,SAAAC,KAAAC;UAEXhC,GAAAiC,YAAAC,KAAAF;;;MAIRG,aAAA,SAAAA;QACI,IAAAC,WAAArB,KAAAV,QAAAgC;QACAtB,KAAAC,OAAAsB,KAAA,OAAAF","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        editBox:cc.EditBox,\n        \n    },\n\n    onLoad () {\n\n        let isLocalHost = false;\n        if(window.location.href.indexOf(\"localhost\")!=-1 || window.location.href.indexOf(\"127.0.0.1\")!=-1){\n            isLocalHost = true;\n        }\n        console.log(\"isLocalHost\", isLocalHost);\n\n        this.socket = new window.io(isLocalHost?\"http://127.0.0.1:3000\":\"http://174.129.37.33:3000\", {transports: ['websocket', 'polling', 'flashsocket']});\n\n        this.socket.on(\"connect\", this.handleConnect.bind(this));\n        this.socket.on(\"onTTSCompleted\", this.onTTSCompleted.bind(this));\n\n    },\n\n    handleConnect(){\n        console.log('connected', this.socket.id); \n    },\n\n    onTTSCompleted(info){\n        if(!info){\n            return;\n        }\n        console.log(\"onTTSCompleted\", info.file, info.info);\n\n        let remoteUrl = \"http://127.0.0.1:3000/output/?fileName=\" + info.file;\n        cc.loader.load({url: remoteUrl, type: 'wav'}, function (err, res) {\n            // Use texture to create sprite frame\n            cc.audioEngine.play(res);\n        });\n    }, \n\n    sendHandler(){\n        let sendText = this.editBox.string;\n        this.socket.emit(\"tts\", sendText);\n    }\n\n    \n\n    // update (dt) {},\n});\n"],"file":"project.dev.js"}